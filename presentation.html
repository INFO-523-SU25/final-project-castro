<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Cesar Castro M.">
  <title>Uncovering Patterns and Anomalies in Manufacturing Data</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-6cdba8845797a0b5a60f808f0334ef8f.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="images/background.png" data-background-opacity="0.7" data-background-size="stretch" data-slide-number="none" class="quarto-title-block center">
  <h1 class="title">Uncovering Patterns and Anomalies in Manufacturing Data</h1>
  <p class="subtitle">INFO 523 - Summer 2025 - Final Project</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Cesar Castro M. 
</div>
</div>
</div>

</section>
<section>
<section id="uncovering-patterns-and-anomalies-in-manufacturing-data" class="title-slide slide level1 center">
<h1>Uncovering Patterns and Anomalies in Manufacturing Data</h1>

</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<ul>
<li>All code used to generate the charts and tables on this presentation can be found here:</li>
<li><a href="https://github.com/INFO-523-SU25/final-project-castro/tree/main/src" class="uri">https://github.com/INFO-523-SU25/final-project-castro/tree/main/src</a></li>
</ul>
</section>
<section id="dataset-for-machine-learning-classification" class="slide level2">
<h2>Dataset for Machine Learning Classification</h2>
<ul>
<li><p>Source: <a href="https://www.kaggle.com/datasets/shivamb/machine-predictive-maintenance-classification">Machine Predictive Maintenance Classification</a></p></li>
<li><p>Key Features:</p>
<div style="font-size: 0.5em;">
<ul>
<li>UID: unique identifier ranging from 1 to 10000</li>
<li>productID: consisting of a letter L, M, or H for low (50% of all products), medium (30%), and high (20%) as product quality variants and a variant-specific serial number</li>
<li>Type: is a columns that consist only on the letters L, M and H from productID.</li>
<li>air temperature [K]: generated using a random walk process later normalized to a standard deviation of 2 K around 300 K</li>
<li>process temperature [K]: generated using a random walk process normalized to a standard deviation of 1 K, added to the air temperature plus 10 K.</li>
<li>rotational speed [rpm]: calculated from powepower of 2860 W, overlaid with a normally distributed noise</li>
<li>torque [Nm]: torque values are normally distributed around 40 Nm with an Ïƒ = 10 Nm and no negative values.</li>
<li>tool wear [min]: The quality variants H/M/L add 5/3/2 minutes of tool wear to the used tool in the process.</li>
<li>Machine failure: label that indicates, whether the machine has failed in this particular data point for any of the following failure modes are true</li>
</ul>
</div></li>
</ul>
</section>
<section id="manufacturing-data-exploration" class="slide level2">
<h2>Manufacturing Data Exploration</h2>
<p>Example of 5 rows of the synthetic data used for classification problem.</p>
<div style="font-size: 0.5em;">
<div id="16a76cc7" class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="4">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: right;">

<th>
</th>

<th>
UDI
</th>

<th>
Product ID
</th>

<th>
Type
</th>

<th>
Air temperature [K]
</th>

<th>
Process temperature [K]
</th>

<th>
Rotational speed [rpm]
</th>

<th>
Torque [Nm]
</th>

<th>
Tool wear [min]
</th>

<th>
Target
</th>

<th>
Failure Type
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
1
</td>

<td>
M14860
</td>

<td>
M
</td>

<td>
298.1
</td>

<td>
308.6
</td>

<td>
1551
</td>

<td>
42.8
</td>

<td>
0
</td>

<td>
0
</td>

<td>
No Failure
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2
</td>

<td>
L47181
</td>

<td>
L
</td>

<td>
298.2
</td>

<td>
308.7
</td>

<td>
1408
</td>

<td>
46.3
</td>

<td>
3
</td>

<td>
0
</td>

<td>
No Failure
</td>

</tr>

<tr>

<th>
2
</th>

<td>
3
</td>

<td>
L47182
</td>

<td>
L
</td>

<td>
298.1
</td>

<td>
308.5
</td>

<td>
1498
</td>

<td>
49.4
</td>

<td>
5
</td>

<td>
0
</td>

<td>
No Failure
</td>

</tr>

<tr>

<th>
3
</th>

<td>
4
</td>

<td>
L47183
</td>

<td>
L
</td>

<td>
298.2
</td>

<td>
308.6
</td>

<td>
1433
</td>

<td>
39.5
</td>

<td>
7
</td>

<td>
0
</td>

<td>
No Failure
</td>

</tr>

<tr>

<th>
4
</th>

<td>
5
</td>

<td>
L47184
</td>

<td>
L
</td>

<td>
298.2
</td>

<td>
308.7
</td>

<td>
1408
</td>

<td>
40.0
</td>

<td>
9
</td>

<td>
0
</td>

<td>
No Failure
</td>

</tr>

</tbody>

</table>
</div>
</div>
</div>
</section>
<section id="manufacturing-data-exploration-1" class="slide level2">
<h2>Manufacturing Data Exploration</h2>
<div style="font-size: 0.7em;">
<p>Numerical Features Relationship</p>
</div>
<div class="columns">
<div class="column" style="width:60%;">
<div id="15ab12b9" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-6-output-1.png"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<div style="font-size: 0.7em;">
<ul>
<li>Failures marked on the pair plot showing stronger relationship with some features.</li>
<li>There is some non-linear correlation observed between Torque and Rotation speed (suggesting data is not entirely random and mimic a real use case).</li>
<li>There is a clear relationship between the fails and some of the features.</li>
</ul>
</div>
</div></div>
</section>
<section id="manufacturing-data-preparation" class="slide level2">
<h2>Manufacturing Data Preparation</h2>
<p>Data Scaling</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a><span class="co">#Standardization</span></span>
<span id="cb1-2"><a></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler <span class="co"># use StandardScalar from sklearn</span></span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a>mfg_data_scaled <span class="op">=</span> mfg_data.copy().drop(columns<span class="op">=</span>[<span class="st">'Target'</span>])</span>
<span id="cb1-5"><a></a></span>
<span id="cb1-6"><a></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb1-7"><a></a>num_cols <span class="op">=</span> mfg_data_scaled.select_dtypes(include<span class="op">=</span><span class="st">"number"</span>).columns.to_list()</span>
<span id="cb1-8"><a></a>mfg_data_scaled[num_cols] <span class="op">=</span> scaler.fit_transform(mfg_data_scaled[num_cols])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Categorical Features Encoding</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span>
<span id="cb2-2"><a></a></span>
<span id="cb2-3"><a></a>l_encoder <span class="op">=</span> LabelEncoder()</span>
<span id="cb2-4"><a></a>mfg_data_3[<span class="st">'FailureType_encoded'</span>] <span class="op">=</span> l_encoder.fit_transform(mfg_data_3[<span class="st">'Failure Type'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="model-selection" class="slide level2">
<h2>Model Selection</h2>
<div style="font-size: 0.7em;">
<p>Method adapted from Chanin Nantasenamat’s GitHub code, multiple classification models were compared for ROC-AUC and the F1 score.</p>
</div>

<img data-src="images/paste-20.png" class="r-stretch"></section>
<section id="model-selection-cont." class="slide level2">
<h2>Model Selection Cont.</h2>
<div style="font-size: 0.7em;">
<p>Two models will be evaluated Random Forest Classifer based on the results of the comparison and XGboost based on research model might be proper for imbalance datasets (<a href="https://xgboosting.com/xgboost-for-imbalanced-classification/" class="uri">https://xgboosting.com/xgboost-for-imbalanced-classification/</a>)</p>
</div>

<img data-src="images/paste-2.png" width="953" class="r-stretch"></section>
<section id="random-forest-model-tuning" class="slide level2">
<h2>Random Forest Model Tuning</h2>
<div style="font-size: 0.7em;">
<p>For hyper-parameter tuning a combination of&nbsp;<em>sklearn.model_selection - GridSearchCV and RandomizedSearchCV</em>&nbsp;was used to run over multiple options.</p>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> RandomizedSearchCV</span>
<span id="cb3-2"><a></a><span class="im">from</span> scipy.stats <span class="im">import</span> randint, uniform</span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a>param_dist <span class="op">=</span> {</span>
<span id="cb3-5"><a></a>    <span class="st">'n_estimators'</span>: randint(<span class="dv">50</span>, <span class="dv">500</span>),</span>
<span id="cb3-6"><a></a>    <span class="st">'max_depth'</span>: randint(<span class="dv">1</span>, <span class="dv">20</span>),</span>
<span id="cb3-7"><a></a>    <span class="st">'min_samples_split'</span>: randint(<span class="dv">2</span>, <span class="dv">20</span>),</span>
<span id="cb3-8"><a></a>    <span class="st">'min_samples_leaf'</span>: randint(<span class="dv">1</span>, <span class="dv">20</span>),</span>
<span id="cb3-9"><a></a>    <span class="st">'max_features'</span>: [<span class="st">'auto'</span>, <span class="st">'sqrt'</span>, <span class="st">'log2'</span>]</span>
<span id="cb3-10"><a></a>}</span>
<span id="cb3-11"><a></a></span>
<span id="cb3-12"><a></a>rf <span class="op">=</span> RandomForestClassifier()</span>
<span id="cb3-13"><a></a>rand_search <span class="op">=</span> RandomizedSearchCV(rf, param_distributions<span class="op">=</span>param_dist, n_iter<span class="op">=</span><span class="dv">20</span>, cv<span class="op">=</span><span class="dv">5</span>,scoring<span class="op">=</span><span class="st">'f1'</span>)</span>
<span id="cb3-14"><a></a>rand_search.fit(X_train, y_train)</span>
<span id="cb3-15"><a></a><span class="bu">print</span>(<span class="st">'Best hyperparameters:'</span>, rand_search.best_params_)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="random-forest-results" class="slide level2">
<h2>Random Forest Results</h2>
<div style="font-size: 0.7em;">
<p>After tuning the model, the best F1 score obtained is 0.62. Cross-validation results suggest the model is over-fitting and might not be able to generalize.</p>
<ul>
<li><p>RandomForestClassifier: ROC AUC on test dataset: 0.9751</p></li>
<li><p>RandomForestClassifier: f1 score on test dataset: 0.6258</p></li>
</ul>
<p>Cross Validation Results</p>
<ul>
<li><p>Test_f1 Cross Validation results 0.45</p></li>
<li><p>Train_f1 Cross Validation results 0.83</p></li>
</ul>
<p>There is a big difference in performance between test and train results for the CV test.</p>
</div>
</section>
<section id="handling-imbalanced-dataset" class="slide level2">
<h2>Handling imbalanced dataset</h2>
<div style="font-size: 0.7em;">
<p>Different techniques were explored to see if the model would improve over-fitting and F1-score.</p>
<ul>
<li><p>Over sampling using Synthetic Minority Oversampling Technique (SMOTE)&nbsp;(imblearn)</p></li>
<li><p>Under sampling using RandomUnderSampler (imblearn)</p></li>
</ul>
<p>No significant Improvement was observed on this specific dataset.</p>
</div>
</section>
<section id="random-forest-threshold-optimization" class="slide level2">
<h2>Random Forest Threshold Optimization</h2>
<div style="font-size: 0.7em;">
<p>To improve the F1 score, a change in the probability threshold was explored; instead of using the standard 0.5, an analysis was done to estimate the ideal point to optimized the F1-Score</p>
</div>

<img data-src="images/paste-3.png" width="702" class="r-stretch"></section>
<section id="optimized-model-results" class="slide level2">
<h2>Optimized Model Results</h2>

<img data-src="images/paste-4.png" width="870" class="r-stretch"><div style="font-size: 0.7em;">
<ul>
<li>After improving the threshold based on the model results, a balance can be found between precision and recall.</li>
</ul>
</div>
</section>
<section id="xgboost-model-definition" class="slide level2">
<h2>XGBoost&nbsp;Model Definition</h2>
<div style="font-size: 0.7em;">
<p>A second approach is to employ XGBoost, a model that offers native functionality for applying class-specific weights. By increasing the weight of the minority class, the model is anticipated to more effectively mitigate class imbalance.</p>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a></a><span class="im">import</span> xgboost <span class="im">as</span> xgb</span>
<span id="cb4-2"><a></a></span>
<span id="cb4-3"><a></a>scale_pos_weight <span class="op">=</span> (<span class="bu">len</span>(y0) <span class="op">-</span> np.<span class="bu">sum</span>(y0)) <span class="op">/</span> np.<span class="bu">sum</span>(y0) <span class="co">#Intent is to give more weight to the minority class (1s on this case)</span></span>
<span id="cb4-4"><a></a></span>
<span id="cb4-5"><a></a>xgmodel <span class="op">=</span> xgb.XGBClassifier(</span>
<span id="cb4-6"><a></a>    scale_pos_weight<span class="op">=</span>scale_pos_weight,</span>
<span id="cb4-7"><a></a>    use_label_encoder<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb4-8"><a></a>    eval_metric<span class="op">=</span><span class="st">'logloss'</span>,</span>
<span id="cb4-9"><a></a>    random_state<span class="op">=</span><span class="dv">42</span></span>
<span id="cb4-10"><a></a>)</span>
<span id="cb4-11"><a></a></span>
<span id="cb4-12"><a></a>xgmodel.fit(X_train, y_train)</span>
<span id="cb4-13"><a></a>y_pred <span class="op">=</span> xgmodel.predict(X_test)</span>
<span id="cb4-14"><a></a></span>
<span id="cb4-15"><a></a>f1 <span class="op">=</span> f1_score(y_test, y_pred)</span>
<span id="cb4-16"><a></a><span class="bu">print</span>(<span class="ss">f"F1 Score: </span><span class="sc">{</span>f1<span class="sc">:.3f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="xgboost-model-results" class="slide level2">
<h2>XGBoost&nbsp;Model Results</h2>
<div style="font-size: 0.7em;">
<p>The F1 score for XGBoost without significant tuning and using class-weights is better than the random forest model originally used.</p>
</div>
<div class="columns">
<div class="column" style="width:40%;">
<p>Model Results</p>
<ul>
<li>F1 Score: 0.757</li>
</ul>
<p>Cross Validation</p>
<ul>
<li><p>Test_f1 Cross Validation results 0.73</p></li>
<li><p>Train_f1 Cross Validation results 1.00</p></li>
</ul>
</div><div class="column" style="width:60%;">
<p><img data-src="images/paste-7.png" width="738"></p>
</div></div>
</section>
<section id="xgboost-multi-class-model" class="slide level2">
<h2>XGBoost&nbsp;Multi-Class Model</h2>
<div style="font-size: 0.7em;">
<p>XGBoost results were better than Random Forest. Multi-class model will be created to predict the failure types:</p>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a></a><span class="co"># Defining weights for each class.</span></span>
<span id="cb5-2"><a></a>classes, counts <span class="op">=</span> np.unique(y_train, return_counts<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-3"><a></a>inv_freq <span class="op">=</span> <span class="fl">1.0</span> <span class="op">/</span> counts</span>
<span id="cb5-4"><a></a>class_weights <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(classes, inv_freq))</span>
<span id="cb5-5"><a></a>sample_weights <span class="op">=</span> np.array([class_weights[label] <span class="cf">for</span> label <span class="kw">in</span> y_train])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="xgboost-model-results-1" class="slide level2">
<h2>XGBoost&nbsp;Model Results</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div style="font-size: 0.7em;">
<p>Model Results</p>
<ul>
<li><p>F1 score per class:</p>
<ul>
<li>Heat-Dissipation: 0.95</li>
<li>No Failure: 0.99</li>
<li>Overstrain Failure 0.76</li>
<li>Powe Failure: 0.8</li>
<li>Random Failures and Tool Wear Failure are both 0.</li>
</ul></li>
</ul>
</div>
</div><div class="column" style="width:60%;">
<p><img data-src="images/paste-9.png" width="690"></p>
</div></div>
</section>
<section id="xgboost-features-of-importance" class="slide level2">
<h2>XGBoost&nbsp;Features of Importance</h2>
<div style="font-size: 0.7em;">
<p>Although the model performance is not great for all classes, understanding what features are important in the prediction model can help context experts interpret results and take action to reduce failures and improve the process overall.</p>
</div>

<img data-src="images/paste-10.png" width="649" class="r-stretch"></section>
<section id="time-series-analysis" class="slide level2">
<h2>Time Series Analysis</h2>
<div style="font-size: 0.7em;">
<p>The second dataset consists of a simulated real-time sensor data from industrial machines. Source is also from Kaggle and it can be found here:&nbsp;<a href="https://www.kaggle.com/datasets/ziya07/intelligent-manufacturing-dataset/data" class="uri">https://www.kaggle.com/datasets/ziya07/intelligent-manufacturing-dataset/data</a></p>
</div>
<p>Key Features:</p>
<div style="font-size: 0.7em;">
<pre><code>-   Industrial IoT Sensor Data
    -   Temperature_C, Vibration_Hz, Power_Consumption_kW,
-   Network Performance:
    -   Network_Latency_ms, Packet_Loss_%, Quality_Control_Defect_Rate_%
-   Production Indicators:
    -   Production_Speed_units_per_hr, Predictive_Maintenance_Score, Error_Rate_%
-   Target Column Efficiency_StatusKey Features:</code></pre>
</div>
</section>
<section id="time-serie-data-exploration" class="slide level2">
<h2>Time Serie Data Exploration</h2>
<div style="font-size: 0.7em;">
<p>Example of 5 rows of the synthetic data used for time series analysis.</p>
</div>
<div style="font-size: 0.5em;">
<div id="a9aa901a" class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="6">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: right;">

<th>
</th>

<th>
Timestamp
</th>

<th>
Machine_ID
</th>

<th>
Operation_Mode
</th>

<th>
Temperature_C
</th>

<th>
Vibration_Hz
</th>

<th>
Power_Consumption_kW
</th>

<th>
Network_Latency_ms
</th>

<th>
Packet_Loss_%
</th>

<th>
Quality_Control_Defect_Rate_%
</th>

<th>
Production_Speed_units_per_hr
</th>

<th>
Predictive_Maintenance_Score
</th>

<th>
Error_Rate_%
</th>

<th>
Efficiency_Status
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
2024-01-01 00:00:00
</td>

<td>
39
</td>

<td>
Idle
</td>

<td>
74.137590
</td>

<td>
3.500595
</td>

<td>
8.612162
</td>

<td>
10.650542
</td>

<td>
0.207764
</td>

<td>
7.751261
</td>

<td>
477.657391
</td>

<td>
0.344650
</td>

<td>
14.965470
</td>

<td>
Low
</td>

</tr>

<tr>

<th>
1
</th>

<td>
2024-01-01 00:01:00
</td>

<td>
29
</td>

<td>
Active
</td>

<td>
84.264558
</td>

<td>
3.355928
</td>

<td>
2.268559
</td>

<td>
29.111810
</td>

<td>
2.228464
</td>

<td>
4.989172
</td>

<td>
398.174747
</td>

<td>
0.769848
</td>

<td>
7.678270
</td>

<td>
Low
</td>

</tr>

<tr>

<th>
2
</th>

<td>
2024-01-01 00:02:00
</td>

<td>
15
</td>

<td>
Active
</td>

<td>
44.280102
</td>

<td>
2.079766
</td>

<td>
6.144105
</td>

<td>
18.357292
</td>

<td>
1.639416
</td>

<td>
0.456816
</td>

<td>
108.074959
</td>

<td>
0.987086
</td>

<td>
8.198391
</td>

<td>
Low
</td>

</tr>

<tr>

<th>
3
</th>

<td>
2024-01-01 00:03:00
</td>

<td>
43
</td>

<td>
Active
</td>

<td>
40.568502
</td>

<td>
0.298238
</td>

<td>
4.067825
</td>

<td>
29.153629
</td>

<td>
1.161021
</td>

<td>
4.582974
</td>

<td>
329.579410
</td>

<td>
0.983390
</td>

<td>
2.740847
</td>

<td>
Medium
</td>

</tr>

<tr>

<th>
4
</th>

<td>
2024-01-01 00:04:00
</td>

<td>
8
</td>

<td>
Idle
</td>

<td>
75.063817
</td>

<td>
0.345810
</td>

<td>
6.225737
</td>

<td>
34.029191
</td>

<td>
4.796520
</td>

<td>
2.287716
</td>

<td>
159.113525
</td>

<td>
0.573117
</td>

<td>
12.100686
</td>

<td>
Low
</td>

</tr>

</tbody>

</table>
</div>
</div>
</div>
</section>
<section id="time-serie-data-exploration-cont." class="slide level2">
<h2>Time Serie Data Exploration cont.</h2>
<div style="font-size: 0.7em;">
<p>Example distribution for one Feature</p>
</div>

<img data-src="images/paste-11.png" width="808" class="r-stretch"><div style="font-size: 0.7em;">
<p>Data seems randomly generated instead of coming from a real scenario.</p>
</div>
</section>
<section id="time-serie-data-exploration-cont.-1" class="slide level2">
<h2>Time Serie Data Exploration cont.</h2>
<div style="font-size: 0.7em;">
<p>In order to make the data more like a real scenario, a mean was calculated for every 12 hours.</p>
</div>

<img data-src="images/paste-12.png" width="829" class="r-stretch"></section>
<section id="time-serie-data-exploration-cont.-2" class="slide level2">
<h2>Time Serie Data Exploration cont.</h2>
<div style="font-size: 0.7em;">
<p>Example Trend for Power_Consumption_kW for one of the machines.</p>
</div>

<img data-src="images/paste-14.png" class="r-stretch"></section>
<section id="time-serie-data-analysis" class="slide level2">
<h2>Time Serie Data Analysis</h2>
<div style="font-size: 0.7em;">
<p>After pre-processing the data, the study is focused on understanding how algorithms like the seasonal_decompose and ARIMA (or auto_arima) can be used for anomaly detection.</p>
</div>
</section>
<section id="time-serie-data-seasonal-decomposition" class="slide level2">
<h2>Time Serie Data Seasonal-Decomposition</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a></a><span class="co">#https://www.statsmodels.org/stable/generated/statsmodels.tsa.seasonal.seasonal_decompose.html</span></span>
<span id="cb7-2"><a></a><span class="im">from</span> statsmodels.tsa.seasonal <span class="im">import</span> seasonal_decompose</span>
<span id="cb7-3"><a></a><span class="co"># Decompose the time series</span></span>
<span id="cb7-4"><a></a>decomposition <span class="op">=</span> seasonal_decompose(ts_df[<span class="st">'Power_Consumption_kW'</span>], model <span class="op">=</span> <span class="st">'additive'</span>,period<span class="op">=</span><span class="dv">14</span>) <span class="co"># 7days for period</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<img data-src="images/paste-15.png" class="r-stretch"></section>
<section id="time-serie-data-seasonal-decomposition-1" class="slide level2">
<h2>Time Serie Data Seasonal-Decomposition</h2>
<div style="font-size: 0.7em;">
<p>Anomaly detection using Residuals:</p>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a></a><span class="co"># Anomalies in residuals</span></span>
<span id="cb8-2"><a></a>residuals <span class="op">=</span> decomposition.resid.dropna() <span class="co">#Obtain residuals from decompositions</span></span>
<span id="cb8-3"><a></a>threshold <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> residuals.std() <span class="co"># Our rule, on this cases based on research we selected to use 2X the standard deviation of the residuals</span></span>
<span id="cb8-4"><a></a>anomalies <span class="op">=</span> np.<span class="bu">abs</span>(residuals) <span class="op">&gt;</span> threshold <span class="co"># Applying the rule to obtain the anomalies</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div style="font-size: 0.7em;">
<p>4 Data points identified as anomalies using this method</p>
<p><img data-src="images/paste-18.png" width="695"></p>
</div>
</section>
<section id="time-serie-data-arima" class="slide level2">
<h2>Time Serie Data ARIMA</h2>
<div style="font-size: 0.7em;">
<p>Model Fitting</p>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a></a><span class="co">#Fitting auto-arima model</span></span>
<span id="cb9-2"><a></a><span class="im">from</span> pmdarima <span class="im">import</span> auto_arima</span>
<span id="cb9-3"><a></a>auto_model <span class="op">=</span> auto_arima(ts_df[<span class="st">'Power_Consumption_kW'</span>], </span>
<span id="cb9-4"><a></a>                        seasonal<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb9-5"><a></a> </span>
<span id="cb9-6"><a></a>                        error_action <span class="op">=</span> <span class="st">'ignore'</span>,  </span>
<span id="cb9-7"><a></a>                        suppress_warnings <span class="op">=</span> <span class="va">True</span>, </span>
<span id="cb9-8"><a></a>                        stepwise <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb9-9"><a></a><span class="bu">print</span>(auto_model.summary())</span>
<span id="cb9-10"><a></a><span class="bu">print</span>(<span class="ss">f"Best (p, d, q): (</span><span class="sc">{</span>auto_model<span class="sc">.</span>order[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>auto_model<span class="sc">.</span>order[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>auto_model<span class="sc">.</span>order[<span class="dv">2</span>]<span class="sc">}</span><span class="ss">)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="time-serie-data-arima---results" class="slide level2">
<h2>Time Serie Data ARIMA - Results</h2>
<div style="font-size: 0.7em;">
<p>Results from Auto-Arima Model Fitting</p>
</div>

<img data-src="images/paste-16.png" width="943" class="r-stretch"></section>
<section id="time-serie-data-arima---results-cont." class="slide level2">
<h2>Time Serie Data ARIMA - Results Cont.</h2>
<div style="font-size: 0.7em;">
<p>Results from the predictions are almost a constant value around the center of the distribution, meaning the ARIMA model is closely predicting the mean for every single value of the time series data. One reason for this could be that the data is not predictable.</p>
</div>

<img data-src="images/paste-17.png" class="r-stretch"></section>
<section id="conclusions" class="slide level2">
<h2>Conclusions</h2>
<div style="font-size: 0.5em;">
<ul>
<li>The study demonstrated the application of concepts in machine learning to common manufacturing problems.</li>
<li>The Random Forest Classifier model ROC-AUC scores are high, indicating the model can differentiate effectively between fails and no-fails. However, in a real manufacturing process, the majority of the results are positive/pass, making this indicator not the best for this case. Recall and precision are more appropriate; depending on the use case, we would want to tune the model in one or the other direction or use the F1-score to optimize both.</li>
<li>The Random Forest model performed poorly for the F1 score when using a standard threshold of 0.5. The study demonstrated this can be improved by selecting an optimized threshold based on the model results.</li>
<li>Sampling can be a useful method to handle imbalanced datasets; however, in this specific case, it did not provide a significant improvement in model performance.</li>
<li>Assigning weights to each classes to handle the imbalance sample in combination with gradient boosting (XGboost) model, resulted in better results for F1-Score.</li>
<li>Multi-class classification results using the learnings from the binary-classification were demonstrated. Due to the nature and frequency of the failures and their relationship with the input features, two classes had zero F1-scores, meaning the model was not able to predict them. Other classes had acceptable F1-scores.</li>
<li>The study demonstrated how seasonal-decomposition and ARIMA can be used for anomaly detection in a real manufacturing use case; results showed how data points deviating the most from the center/target can be identified by using these methods. These methods might not be the best for a process where there are no patterns and data might just have random variability from the target.</li>
</ul>
</div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/INFO-523-SU25\.github\.io\/final-project-castro\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>